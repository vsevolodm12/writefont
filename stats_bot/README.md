# –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –±–æ—Ç –¥–ª—è Consp Bot

–õ—ë–≥–∫–∏–π Telegram-–±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ –∫–æ–º–∞–Ω–¥–µ `/stat` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é —Å–≤–æ–¥–∫—É:

```
üìä –ó–∞ —Å–µ–≥–æ–¥–Ω—è:
- –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 12
- –ì–µ–Ω–µ—Ä–∞—Ü–∏–π PDF: 45

üìà –ó–∞ –≤—Å—ë –≤—Ä–µ–º—è:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 327
- PDF: 1 254

–ü–æ—Å–ª–µ–¥–Ω–∏–µ:
‚Ä¢ @username (955297537) ‚Äî 3 PDF
‚Ä¢ ‚Ä¶
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   ```bash
   cp stats_bot/.env.example stats_bot/.env
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`:
   - `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω **—Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ** –±–æ—Ç–∞ (`7040581622:AAGF-luIPYhb6WGVJNHYA6JOojZ-sM5TbP0`).
   - `ADMIN_IDS` ‚Äî —Å–ø–∏—Å–æ–∫ Telegram ID, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å `/stat` (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é).
   - `DB_*` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ `consp_bot`.

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   cd stats_bot
   python -m venv venv
   source venv/bin/activate
   pip install -r requirements.txt
   python bot.py
   ```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

- –ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `psycopg2` –¥–ª—è —á—Ç–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü `users` –∏ `jobs`.
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ (—á–µ—Ä–µ–∑ `asyncio.to_thread`), —á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å event loop.
- –í –≤—ã–±–æ—Ä–∫–µ ¬´–ø–æ—Å–ª–µ–¥–Ω–∏–µ¬ª –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–æ 5 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º —á–∏—Å–ª–æ–º –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö PDF –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ (–µ—Å–ª–∏ —Ç–∞–∫–∏—Ö –Ω–µ—Ç, –±–µ—Ä—ë—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞).

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–•–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç—á—ë—Ç –≤ –∫–∞–Ω–∞–ª:
1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª —Å –ø—Ä–∞–≤–∞–º–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.
2. –£–∫–∞–∂–∏—Ç–µ `REPORT_CHANNEL_ID` –≤ `.env`.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/stat@botname` –≤ –∫–∞–Ω–∞–ª–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É –≤ –∫–æ–¥–µ.

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ —Ö–æ—á–µ—à—å. *** End Patch

